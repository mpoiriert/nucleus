<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard</title>
  {{ assetBag }}
  {{ assetBag.add("/nucleus/asset/dashboard/vendor/bootstrap/css/bootstrap.min.css") }}
  {{ assetBag.add("/nucleus/asset/dashboard/vendor/bootstrap/css/bootstrap-responsive.min.css") }}
  {{ assetBag.add("/nucleus/asset/dashboard/app.css") }}
  {{ assetBag.add("/nucleus/asset/dashboard/vendor/jquery-1.10.1.min.js") }}
  {{ assetBag.add("/nucleus/asset/dashboard/vendor/json2.js") }}
  {{ assetBag.add("/nucleus/asset/dashboard/vendor/underscore-min.js") }}
  {{ assetBag.add("/nucleus/asset/dashboard/vendor/backbone-min.js") }}
  {{ assetBag.add("/nucleus/asset/dashboard/vendor/bootstrap/js/bootstrap.min.js") }}
  {{ assetBag.add("/nucleus/asset/dashboard/app.js") }}
  <script type="text/javascript">
    $(function() {
    Dashboard.start({{ result.configuration|json_encode|raw }});
    });
  </script>
</head>
<body>
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <a class="brand" href="#">Dashboard</a>
    </div>
  </div>

  <div id="submenu"></div>

  <div id="main"></div>

  <script type="text/template" id="toolbar-tpl">
    <div class="btn-group">
    <% _.each(buttons, function(btn) { %>
        <a href="<%= base_url + btn.controller + '/' + btn.name %>" data-controller="<%= btn.controller %>" data-action="<%= btn.name %>" class="btn"><i class="icon-<%= btn.icon %>"></i> <%= btn.title %></a>
    <% }); %>
    </div>
  </script>

  <script type="text/template" id="form-action-tpl">
    <% _.each(fields, function(field) { %>
      <% if (field.editable) { %>
        <div class="control-group">
          <label class="control-label" for="<%= field.name %>"><%= field.title %></label>
          <div class="controls">
            <% if (field.field_type == 'textarea') { %>
              <textarea name="<%= field.name %>" data-type="<%= field.formated_type %>"><%= values[field.name] %></textarea>
            <% }Â else if (field.field_type == 'checkbox' || field.field_type == 'radio') { %>
              <input type="<%= field.field_type %>" name="<%= field.name %>" value="<%= field.value %>"
                data-type="<%= field.formated_type %>" <% if (values[field.name] == field.value) print("checked"); %>>
            <% } else { %>
              <input type="<%= field.field_type %>" name="<%= field.name %>" value="<%= values[field.name] %>"
                data-type="<%= field.formated_type %>">
            <% } %>
          </div>
        </div>
      <% } else { %>
        <input type="hidden" name="<%= field.name %>" value="<%= values[field.name] %>">
      <% } %>
    <% }) %>
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">Submit</button>
    </div>
  </script>

  <script type="text/template" id="object-action-tpl">
    <dl>
    <% _.each(fields, function(field) { %>
      <dt><%= field.title %></dt>
      <dd>
        <%= model[field.name] %>
        <% if (field.identifier) { %>
          <input type="hidden" name="<%= field.name %>" value="<%= model[field.name] %>">
        <% } %>
      </dd>
    <% }) %>
    </dl>
  </script>

  <script type="text/template" id="list-action-tpl">
    <table class="table table-bordered table-striped table-condensed">
      <thead>
        <tr>
          <th></th>
        <% _.each(fields, function(f) { %>
          <th data-field="<%= f.name %>"><%= f.title %></th>
        <% }) %>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </script>

  <script type="text/template" id="pagination-tpl">
    <div class="pagination">
      <ul>
        <li class="disabled"><a href="#" class="prev">Prev</a></li>
        <% for (var i = 1; i <= nb_pages; i++) { %>
          <li class="<% if (i == 1) print('active'); %>"><a href="#" data-page="<%= i %>"><%= i %></a></li>
        <% } %>
        <li class="<% if (nb_pages == 1) print('disabled'); %>"><a href="#" class="next">Next</a></li>
      </ul>
    </div>
  </script>

</body>
</html>
